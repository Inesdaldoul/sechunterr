<div class="cti-dashboard-container" [class.dark-mode]="darkMode">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <div class="header-left">
      <h1 class="dashboard-title">Cyber Threat Intelligence Dashboard</h1>
      <p class="dashboard-description">Comprehensive threat intelligence analytics and visualizations</p>
    </div>
    <div class="header-right">
      <button mat-raised-button color="primary" class="refresh-btn" (click)="refreshData()" [disabled]="isLoading">
        <mat-icon>refresh</mat-icon>
        Refresh Data
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading">
    <mat-spinner diameter="50"></mat-spinner>
    <p class="loading-text">Loading threat intelligence data...</p>
  </div>

  <!-- Error State -->
  <div class="error-container" *ngIf="error && !isLoading">
    <mat-icon class="error-icon">error</mat-icon>
    <p class="error-message">{{ error }}</p>
    <button mat-raised-button color="primary" (click)="refreshData()">Try Again</button>
  </div>

  <!-- Dashboard Content -->
  <div class="dashboard-content" *ngIf="!isLoading && !error">
    <!-- First Row -->
    <div class="chart-row">
      <!-- Threat Overview -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Threat Overview</mat-card-title>
          <mat-card-subtitle>Distribution of threat types by severity</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="threatOverviewChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>

      <!-- MITRE Heatmap -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>MITRE Heatmap</mat-card-title>
          <mat-card-subtitle>Techniques and tactics used by threat actors</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="mitreHeatmapChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Second Row -->
    <div class="chart-row">
      <!-- Community Detection -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Community Detection</mat-card-title>
          <mat-card-subtitle>Threat actor communities and relationships</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="communityDetectionChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>

      <!-- PageRank Centrality -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>PageRank Centrality</mat-card-title>
          <mat-card-subtitle>Influence of threat actors in the network</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="pageRankCentralityChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Third Row -->
    <div class="chart-row">
      <!-- Betweenness Centrality -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Betweenness Centrality</mat-card-title>
          <mat-card-subtitle>Key connectors in threat actor networks</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="betweennessCentralityChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>

      <!-- Node Similarity -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Node Similarity</mat-card-title>
          <mat-card-subtitle>Similarity between threat actors and techniques</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="nodeSimilarityChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Fourth Row -->
    <div class="chart-row">
      <!-- Threat Trends Over Time -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Threat Trends Over Time</mat-card-title>
          <mat-card-subtitle>Evolution of threats over the past 12 months</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="threatTrendsChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>

      <!-- OSINT Data Treemap -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>OSINT Data Treemap</mat-card-title>
          <mat-card-subtitle>Hierarchical view of open-source intelligence data</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="osintTreemapChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Fifth Row -->
    <div class="chart-row">
      <!-- Emerging Threats -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Emerging Threats</mat-card-title>
          <mat-card-subtitle>Recently discovered threats and their prevalence</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="emergingThreatsChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>

      <!-- Anomalies in IOC Activity -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Anomalies in IOC Activity</mat-card-title>
          <mat-card-subtitle>Unusual patterns in indicators of compromise</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="anomaliesChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Sixth Row -->
    <div class="chart-row">
      <!-- Event Timeline -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Event Timeline</mat-card-title>
          <mat-card-subtitle>Chronological view of significant threat events</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="eventTimelineChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>

      <!-- Attack Origins -->
      <mat-card class="chart-card">
        <mat-card-header>
          <mat-card-title>Attack Origins</mat-card-title>
          <mat-card-subtitle>Geographical distribution of attack sources</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div id="attackOriginsChart" class="chart-container"></div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
