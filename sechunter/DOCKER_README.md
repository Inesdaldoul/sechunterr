# VOC Security Project - Docker Setup

This document provides instructions for running the VOC Security Project using Docker.

## Prerequisites

- Docker installed on your machine
- Docker Compose installed on your machine

## Running the Application with Docker

### Building and Dockerizing the Application

We've provided scripts to build the Angular application and create a Docker image:

#### Windows (PowerShell):

```powershell
# Build the Angular app and create Docker image
.\build-and-dockerize.ps1
```

#### Linux/macOS (Bash):

```bash
# Make the script executable
chmod +x build-and-dockerize.sh

# Build the Angular app and create Docker image
./build-and-dockerize.sh
```

### Starting and Stopping the Container

After building the Docker image, you can use Docker Compose to manage the container:

#### 1. Start the Container

```bash
docker-compose up -d
```

#### 2. Access the Application

Once the container is running, you can access the application at:

```
http://localhost:8080
```

#### 3. Stop the Container

```bash
docker-compose down
```

### Troubleshooting the Build Process

If you encounter issues during the build process:

1. Make sure you have Node.js and npm installed
2. Check that all dependencies are installed with `npm install`
3. Try building the Angular app manually with `npm run build`
4. Check for any errors in the build output

## Docker Configuration Details

### Dockerfile

The Dockerfile is generated by the build script and uses a simple approach:
1. Uses Nginx Alpine as the base image
2. Copies the pre-built Angular application files into the Nginx html directory
3. Configures Nginx to properly serve the single-page application

Key features:
- Lightweight Nginx Alpine image for efficient serving of static files
- Proper configuration for Angular routing
- Security headers and performance optimizations
- Gzip compression for faster content delivery

### docker-compose.yml

The docker-compose.yml file defines:
- The VOC frontend service
- Network configuration
- Port mapping (8080:80)
- Container restart policy

## Troubleshooting

### Container Not Starting

If the container fails to start, check the logs:

```bash
docker-compose logs voc-frontend
```

### Application Not Accessible

If you cannot access the application:
1. Verify the container is running: `docker ps`
2. Check if the port is correctly mapped: `docker port voc-frontend`
3. Inspect the container logs: `docker logs voc-frontend`

### Angular Files Structure Issues

If you see the default Nginx welcome page instead of your Angular application:

1. Check the file structure inside the container:
   ```bash
   docker exec voc-frontend ls -la /usr/share/nginx/html
   ```

2. Verify that the `index.html` file is in the root directory:
   ```bash
   docker exec voc-frontend cat /usr/share/nginx/html/index.html | head
   ```

3. Check the Nginx configuration:
   ```bash
   docker exec voc-frontend cat /etc/nginx/conf.d/default.conf
   ```

## Development with Docker

For development purposes, we've provided a separate Docker configuration that:
- Mounts your local source code into the container
- Enables hot-reloading for real-time code changes
- Exposes the Angular development server on port 4200

### Starting Development Mode

```bash
# Windows (PowerShell)
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up

# Linux/macOS
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up
```

### Accessing the Development Server

Once the development container is running, you can access the application at:

```
http://localhost:4200
```

### Development Container Features

- **Live Reload**: Changes to your source code will automatically trigger a rebuild
- **Source Maps**: Easier debugging with browser developer tools
- **Development Tools**: Angular CLI and other development tools are available in the container

### Stopping Development Mode

```bash
docker-compose -f docker-compose.yml -f docker-compose.dev.yml down
```
